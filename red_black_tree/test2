uncle = grandparent->left;

			/* Case 1: Uncle is RED */
			if (uncle && uncle->color == RED)
			{
				grandparent->color = RED;
				parent->color = BLACK;
				uncle->color = BLACK;
				new_node = grandparent;
			}
			else
			{
				/* Case 2: Uncle is BLACK and new_node is the left child */
				if (new_node == parent->left)
				{
					rotate_right(tree, parent);
					new_node = parent;
					parent = new_node->parent;
				}

				/* Case 3: Uncle is BLACK and new_node is the right child */
				rotate_left(tree, grandparent);
				swap_colors(parent, grandparent);
				new_node = parent;
			}


void rotate_right(rb_tree_t **tree, rb_tree_t *grandparent)
{
	rb_tree_t *parent = grandparent->left;

	grandparent->left = parent->right;

	if (parent->right)
		parent->right->parent = grandparent;

	parent->parent = grandparent->parent;

	if (!grandparent->parent)
		*tree = parent;
	else if (grandparent == grandparent->parent->left)
		grandparent->parent->left = parent;
	else
		grandparent->parent->right = parent;

	parent->right = grandparent;
	grandparent->parent = parent;
}